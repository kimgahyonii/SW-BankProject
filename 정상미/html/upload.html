<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/nav.css">
    <link rel="stylesheet" href="/정상미/css/upload.css">
    <script src="/SW-BankProject/정상미/js/script.js"></script>
    <title>게시물 업로드</title>
</head>

<body>
    <nav>
        <div class="logo">
            <svg class="localbanklogo" xmlns="http://www.w3.org/2000/svg" width="35" height="42" viewBox="0 0 39 46"
                fill="none">
                <path
                    d="M8.00754 44.2193C7.98391 42.5215 5.96132 39.1453 4.962 38.3178C-0.407034 31.2843 0.673083 27.0183 2.45832 22.8606C6.14555 24.6765 8.96273 25.7044 13.5276 25.3908C20.5167 24.9107 24.5201 18.2715 24.4725 15.7891C24.4344 13.8032 26.6774 12.1515 27.8036 11.5738C28.7077 11.2615 30.6588 10.7401 31.2298 11.1523C31.8009 11.5644 31.6581 12.3856 31.5153 12.7447C30.4494 13.7939 30.5953 16.1795 30.8015 17.2411C33.8851 19.3769 35.4174 22.7211 35.7981 24.1262H37.3685C38.6248 24.2011 38.9706 25.3439 38.9864 25.906V30.5897C39.1387 31.7513 37.9713 32.2915 37.3685 32.4164H35.7981C35.4016 33.8371 33.9898 37.1188 31.5153 38.8799C29.0408 40.641 28.8981 43.6417 29.136 44.9219C29.136 45.8212 28.5015 46.0148 28.1843 45.9991H22.3311C21.3794 45.9991 21.1415 45.281 21.1415 44.9219V43.7978V43.5168C21.1415 43.5168 17.0966 43.6417 16.1924 43.5168V44.9219C16.1924 45.8212 15.3993 46.0148 15.0028 45.9991H9.72066C8.55227 45.9991 8.12586 45.4656 8.01808 44.9833C8.03704 46.3733 8.0268 45.752 8.01469 44.9676C7.9786 44.7956 7.98267 44.6309 8.00754 44.5004C8.00986 44.6531 8.01231 44.8135 8.01469 44.9676C8.01578 44.9729 8.01692 44.9781 8.01808 44.9833C8.01525 44.7756 8.01177 44.523 8.00754 44.2193Z"
                    fill="#353535" />
                <path fill-rule="evenodd" clip-rule="evenodd"
                    d="M11.6 23.2C18.0065 23.2 23.2 18.0065 23.2 11.6C23.2 5.19349 18.0065 0 11.6 0C5.19349 0 0 5.19349 0 11.6C0 18.0065 5.19349 23.2 11.6 23.2ZM7.70101 5.494C7.70101 4.74192 8.31069 4.13224 9.06277 4.13224C9.81485 4.13224 10.4245 4.74192 10.4245 5.494V15.402H15.4957C16.17 15.402 16.7166 15.9486 16.7166 16.6229C16.7166 17.2971 16.17 17.8438 15.4957 17.8438H8.92173C8.24746 17.8438 7.70085 17.2971 7.70085 16.6229C7.70085 16.5994 7.70151 16.576 7.70282 16.5528C7.70162 16.5294 7.70101 16.5057 7.70101 16.482V5.494Z"
                    fill="#353535" />
            </svg>
            <p>LocalBank</p>
        </div>
        <div class="menu">
            <p onclick="location.href='/limso/MainPage1.html'">추천한끼</p>
            <p onclick="location.href='/김가현_mypage/meal_posts.html'">한끼밥상</p>
            <p onclick="location.href='/정상미/html/upload.html'" class="currentmenu">게시하기</p>
            <p onclick="location.href='/김가현_mypage/index.html'">내 저금통</p>
        </div>
    </nav>

    <main class="upload">
        <div class="imgupload">
            <div class="container">
                <div class="twotext">
                    <p class="h11">업로드할 게시물을<br>만들어주세요</p>
                    <p class="h22">이미지를 업로드하고, 로컬푸드 음식과 지역,<br>요리 이름을 작성해주세요.</p>
                </div>
                <div class="incontainertext">
                    <div class="incontainer">
                        <div class="inincontainer">
                            <img src="/정상미/image/imagebutton.png" alt="Upload Image" id="image-button">
                            <!-- 파일 입력 요소 추가 -->
                            <input type="file" id="file-input" style="display: none;">
                        </div>
                        <input type="text" id="title" placeholder=" ">
                        <div class="concon">
                            <div class="placeholder">
                                <div class="field">
                                    <input type="text" id="input-field1" placeholder="로컬푸드 음식과 지역 한줄 설명과">
                                    <input type="text" id="input-field2" placeholder="요리 이름을 적어주세요">
                                </div>
                                <!-- <span class="first bottomtext">로컬푸드 음식과 지역 한줄 설명과</span>
                                    <span class="second accent">요리 이름을 적어주세요</span> -->
                                <img src="/정상미/image/arrow.png" alt="">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="writeupload">
            <p>한끼 밥상에 사용한 로컬푸드</p>
            <input type="text" id="text1">
            <p>어느 지역의 로컬푸드인가요?</p>
            <input type="text" id="text2">
            <p>더보기에 적을 글을 작성해주세요</p>
            <textarea id="text3" cols="30" rows="10"></textarea>
            <button id="submitButton">게시하기</button>
            <!-- <input type="button" id="uploadbutton" value="게시하기"> -->
        </div>
    </main>

    <script>
        // 이미지 버튼을 클릭하면 파일 입력 클릭 이벤트 발생
        document.getElementById('image-button').addEventListener('click', function () {
            document.getElementById('file-input').click();
        });

        // 파일 선택 시 이미지 미리보기
        document.getElementById('file-input').addEventListener('change', function () {
            const file = this.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function (e) {
                    const img = document.createElement('img');
                    img.src = e.target.result;
                    img.classList.add('uploaded'); // 'uploaded' 클래스를 추가하여 스타일 적용

                    const inContainer = document.querySelector('.inincontainer');
                    inContainer.innerHTML = ''; // 기존 이미지를 삭제
                    inContainer.appendChild(img); // 새 이미지를 추가
                }
                reader.readAsDataURL(file);
            }
        });

        // 게시물 추가 버튼 클릭 시 서버에 데이터 전송
        document.getElementById("submitButton").addEventListener("click", function () {
            // 파일 입력에서 선택된 이미지의 경로
            const image = document.getElementById("file-input").value;
            const tag = document.getElementById("tagInput").value;
            const info = document.getElementById("infoInput").value;
            const name = document.getElementById("nameInput").value;

            const formData = new FormData();
            formData.append("image", fileInput);
            formData.append("tag", tag);
            formData.append("info", info);
            formData.append("name", name);

            // 서버로 FormData 전송
            fetch('http://localhost:3000/posts', {
                method: 'POST',
                body: formData
            })
                .then(response => {
                    if (response.ok) {
                        console.log("게시물 추가 성공");
                    } else {
                        console.log("게시물 추가 실패");
                    }
                })
                .catch(error => console.error("에러:", error));
        });

    </script>
</body>

</html>